!function(){angular.module("acComponents.config",[]).value("acComponents.config",{debug:!0}).constant("AC_API_ROOT_URL","http://localhost:9000"),angular.module("acComponents.directives",[]),angular.module("acComponents.filters",[]),angular.module("acComponents.services",[]),angular.module("acComponents",["acComponents.config","acComponents.directives","acComponents.filters","acComponents.services","acComponents.templates","ngSanitize"]),angular.module("acComponents.directives").directive("acDangerIcon",function(){return{replace:!0,templateUrl:"danger-icon.html",link:function(){}}}),angular.module("acComponents.directives").directive("acDatetimePicker",function(){return function(){if(jQuery().datetimepicker){var e={format:"YYYY-MM-DD hh:mm A"};$(".min-form").first().find('[type="datetime"]').datetimepicker(e)}}}),angular.module("acComponents.directives").directive("acDrawer",function(){return{replace:!0,transclude:!0,templateUrl:"drawer.html",link:function(){}}}),angular.module("acComponents.directives").directive("acForecastMini",["AC_API_ROOT_URL",function(e){return{templateUrl:"forecast-mini.html",scope:{forecast:"=acForecast",dangerRating:"=dangerRating",disclaimer:"=disclaimer",sponsor:"=sponsor"},link:function(a,t){t.addClass("ac-forecast-mini"),a.apiUrl=e}}}]),angular.module("acComponents.directives").directive("acLoadingIndicator",function(){return{templateUrl:"loading-indicator.html",replace:!0,link:function(){}}}),angular.module("acComponents.directives").directive("acLocationSelect",["MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID","$timeout",function(e,a,t){return{scope:{latlng:"="},link:function(n,o){function i(e){t(function(){n.latlng=[e.lat,e.lng]},0)}var r,l;L.mapbox.accessToken=e,$("#minForm").on("shown.bs.modal",function(){r.invalidateSize()}),r=L.mapbox.map(o[0],a,{attributionControl:!1,scrollWheelZoom:!1}).on("click",function(e){l?l&&!r.hasLayer(l)&&(i(e.latlng),l.setLatLng(e.latlng).addTo(r).openPopup()):(i(e.latlng),l=L.marker(e.latlng,{icon:L.mapbox.marker.icon({"marker-color":"f79118"}),draggable:!0}),l.bindPopup("Position: "+e.latlng.toString().substr(6)+"<br/>(drag to relocate)").addTo(r).openPopup(),l.on("dragend",function(){var e=l.getLatLng();l.setPopupContent("Position: "+e.toString().substr(6)+"<br/>(drag to relocate)"),l.openPopup(),i(e)}))}),r.setView([52.3,-120.74966],5),n.$watch("latlng",function(e){l&&0===e.length&&r.removeLayer(l)})}}}]),angular.module("acComponents.directives").directive("acMapboxMap",["$rootScope","$window","$location","$timeout","acBreakpoint","acObservation","acForecast","MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID",function(e,a,t,n,o,i,r,l,s){return{template:'<div id="map"></div>',replace:!0,scope:{region:"=acRegion",regions:"=acRegions",showRegions:"=acShowRegions",obs:"=acObs",ob:"=acOb"},link:function(c,d,p){function u(e){return function(){d.height($(a).height()-Number(e)),D.invalidateSize()}}function g(e){var a=D.getZoom()<=6?60:80;return L.icon({iconUrl:e.iconUrl||r.getDangerIconUrl(e.regionId),iconSize:[a,a],labelAnchor:[6,0]})}function m(){T.regions=L.geoJson(c.regions,{style:function(){return A.region.default},onEachFeature:function(e,a){function t(){if(D.getZoom()<9){var e=w();D.fitBounds(a.getBounds(),{paddingBottomRight:e})}T.currentRegion=a,c.$apply(function(){c.region=a})}if(a.bindLabel(e.properties.name),a.on("click",t),a.on("mouseover",function(){a==T.currentRegion?a.setStyle(A.region.selectedhover):a.setStyle(A.region.hover)}),a.on("mouseout",function(){a==T.currentRegion?a.setStyle(A.region.selected):a.setStyle(A.region.default)}),e.properties.centroid){var n=L.latLng(e.properties.centroid[1],e.properties.centroid[0]),o=L.marker(n),i=g({regionId:e.id});o.setIcon(i);var r=1;o.setZIndexOffset(r),o.on("click",function(){t()}),T.dangerIcons.addLayer(o)}}}),f()}function v(){T.dangerIcons.eachLayer(function(e){var a=e.options.icon.options.iconUrl,t=g({iconUrl:a});e.setIcon(t)})}function f(){var e=D.getZoom();if(T.regions&&c.showRegions){var a=D.hasLayer(T.regions);6>e&&a?D.removeLayer(T.regions):e>=6&&!a?D.addLayer(T.regions):e>10&&a&&D.removeLayer(T.regions)}if(T.dangerIcons){var t=D.hasLayer(T.dangerIcons);D.getZoom()<6&&t?D.removeLayer(T.dangerIcons):D.getZoom()>=6&&!t&&D.addLayer(T.dangerIcons);var n=T.dangerIcons.getLayers()[0];if(n){var o=n.options.icon.options.iconSize[0];(e>6&&60===o||6>=e&&80===o)&&v()}}T.obs;var i=.2;if(T.currentRegion&&c.showRegions)if(9>=e)A.region.selected.fillOpacity=i,T.currentRegion.setStyle(A.region.selected);else if(e>9&&13>e){switch(e){case 10:i=.15;break;case 11:i=.1;break;case 12:i=.05}A.region.selected.fillOpacity=i,T.currentRegion.setStyle(A.region.selected)}else T.currentRegion.setStyle(A.region.default)}function h(e){return A.reportType[e]}function b(){if(D.hasLayer(T.obs)&&D.removeLayer(T.obs),c.obs.length>0){var a=new L.MarkerClusterGroup,t=c.obs.map(function(a){var t=L.marker(a.latlng,{icon:L.mapbox.marker.icon({"marker-size":"small","marker-color":h(a.obtype)})});return t.on("click",function(){i.getOne(a.obid,"html").then(function(e){if("sm"===c.device.size||"xs"===c.device.size)c.$emit("ac.min.obclicked",e);else{var a=t.getPopup();if(!a){var n=D.getSize().y-100;a=L.popup({maxHeight:n,maxWidth:400,autoPanPaddingTopLeft:[0,30]}),a.setContent(e),t.bindPopup(a)}t.openPopup()}}),i.getOne(a.obid,"json").then(function(a){e.ogTags=[{type:"title",value:a.title},{type:"image",value:a.thumbs[0]},{type:"description",value:a.comment}]})}),t});a.addLayers(t),D.addLayer(a)}else T.obs=void 0;f()}function y(e){return{type:"Point",coordinates:[e.lng,e.lat]}}function w(){switch(c.device.size){case"xs":return L.point([0,0]);case"sm":return L.point([350,0]);case"md":case"lg":return L.point([480,0]);default:return L.point([0,0])}}function k(){return w().divideBy(2)}function x(e,a){var t=D.latLngToLayerPoint(e);return D.layerPointToLatLng(t.subtract(a))}function C(){var e=k();return x(D.getCenter(),e)}function S(){if(c.showRegions){var e=T.regions.getLayers(),a=C(),t=_.find(e,function(e){return gju.pointInPolygon(y(a),e.feature.geometry)});t||(t=_.min(e,function(e){var t=L.latLng(e.feature.properties.centroid[1],e.feature.properties.centroid[0]);return t.distanceTo(a)})),t&&R(t)}}function R(e){T.currentRegion=e,c.region!==e&&n(function(){c.region=e},10),T.regions.eachLayer(function(a){a===e?a.setStyle(A.region.selected):a.setStyle(A.region.default)})}c.device={},c.showRegions=c.showRegions||!0;var T={dangerIcons:L.featureGroup()},A={region:{"default":{fillColor:"transparent",color:"transparent"},selected:{fillColor:"#489BDF"},hover:{color:"#B43A7E"},selectedhover:{fillColor:"#489BDF",color:"#B43A7E"}},reportType:{incident:"#489BDF",quick:"#B43A71",avalanche:"#489BDF",snowpack:"#B23A7E",weather:"#A43A71"}};L.mapbox.accessToken=l;var D=L.mapbox.map(d[0].id,s,{attributionControl:!1});if(D.setView([52.3,-120.74966],6),L.control.locate({locateOptions:{maxZoom:14}}).addTo(D),o.setBreakpoints({xs:480,sm:600,md:1025}),e.$on("breakpoint",function(e,a){c.device.size=a}),p.topOffset){var O=Number(p.topOffset),P=u(O);angular.element(document).ready(P),angular.element(a).bind("resize",P)}D.on("load",f),D.on("zoomend",f),c.$watch("region",function(e,a){T.regions&&e&&e!==a&&R(e)}),c.$watch("regions",function(e){e&&e.features&&m()}),c.$watch("showRegions",function(e,a){e!==a&&(!e&&D.hasLayer(T.regions)?(T.currentRegion&&(c.region=null,T.currentRegion.setStyle(A.region.default)),D.removeLayer(T.regions)):e&&!D.hasLayer(T.regions)&&(D.addLayer(T.regions),S()))}),c.$watch("obs",function(e){e&&b()}),c.$watch("ob",function(a){a&&a.latlng&&(i.getOne(a.obid,"html").then(function(e){var o=L.marker(a.latlng,{icon:L.mapbox.marker.icon({"marker-size":"small","marker-color":"#09c"})}),i=D.getSize().y-100;o.bindPopup(e,{maxHeight:i,maxWidth:400,autoPanPaddingTopLeft:[0,30]}),o.on("popupclose",function(){D.removeLayer(o),n(function(){t.path("/")},0)}),o.setZIndexOffset(1e4),D.addLayer(o),o.togglePopup()}),i.getOne(a.obid,"json").then(function(a){e.ogTags=[{type:"title",value:a.title},{type:"image",value:a.thumbs[0]},{type:"description",value:a.comment}]}))})}}}]),angular.module("acComponents.directives").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(a,t,n){var o=e(n.fileModel),i=o.assign;t.bind("change",function(){a.$apply(function(){i(a,t[0].files)})})}}}]).directive("acMinReportForm",["$q","$timeout","acQuickReportData","acAvalancheReportData","acIncidentReportData","acSnowpackReportData","acWeatherReportData","acFormUtils","acSubmission","MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID","store",function(e,a,t,n,o,i,r,l,s,c,d,p){return{templateUrl:"min-report-form.html",replace:!0,link:function(c){function d(){a(function(){for(var e in c.report)e in u&&(c.report[e]="ridingConditions"===e||"avalancheConditions"===e?angular.copy(u[e]):u[e]);delete c.report.subid,c.minsubmitting=!1,c.minerror=!1},0)}var u={title:"auto: Quick Report",datetime:moment().format("YYYY-MM-DD hh:mm A"),latlng:[],files:[],obs:{quickReport:{ridingConditions:angular.copy(t.ridingConditions),avalancheConditions:angular.copy(t.avalancheConditions),comment:null},avalancheReport:n,incidentReport:o,snowpackReport:i,weatherReport:r}};c.report=_.cloneDeep(u),c.resetForm=d,c.submitForm=function(){var a=_.cloneDeep(c.report);a.obs=_.reduce(c.report.obs,function(e,a,t){return"quickReport"===t?e.quickReport=angular.copy(a):e[t]=l.getDTOForFields(a.fields),e},{}),console.log("to be sent: ",a.obs);var t=p.get("token");return t?(c.minsubmitting=!0,s.submit(a,t).then(function(a){return!a.data||"error"in a.data?(c.minsubmitting=!1,c.minerror=!0,e.reject("error")):(c.minsubmitting=!1,c.report.subid=a.data.subid,c.report.shareUrl=a.data.obs[0].shareUrl,console.log("submission: "+a.data.subid),a)},function(a){return c.minsubmitting=!1,c.minerror=!0,c.minerrormsg=a,e.reject(a)})):e.reject("auth-error")}}}}]),angular.module("acComponents.directives").directive("acMinReportModal",function(){return{templateUrl:"min-report-modal.html",replace:!0,link:function(){}}}),angular.module("acComponents.directives").directive("acSocialShare",function(){return{templateUrl:"social-share.html",replace:!0,link:function(){}}}),angular.module("acComponents.filters").filter("acNormalizeForecastTitle",function(){return function(e){return e?e.replace(/^Avalanche (Forecast|Bulletin) - /g,""):void 0}}),angular.module("acComponents.filters").filter("dateUtc",function(){return function(e,a){return e?moment.utc(e).format(a):void 0}}),angular.module("acComponents.services").factory("acAvalancheReportData",function(){var e={avalancheObsComment:{prompt:"Avalanche Observation Comment",type:"textarea",value:null,helpText:"Please add additional information, for example terrain, aspect, elevation etc. especially if describing many avalanches together."},avalancheOccurrenceEpoch:{prompt:"Avalanche Observation Datetime",type:"datetime",value:null},avalancheNumber:{prompt:"Number of avalanches in this report",type:"radio",inline:!0,options:["1","2-5","6-10","11-50","51-100"],value:null},avalancheSize:{prompt:"Avalanche Size",type:"radio",inline:!0,value:null,options:["1","1.5","2","2.5","3","3.5","4","4.5","5"],helpText:"Use Canadian size classification. Size 1 is relatively harmless to people. Size 2 can bury, injure or kill a person. Size 3 can bury and destroy a car. Size 4 can destroy a railway car. Size 5 can destroy 40 hectares of forest."},slabThickness:{type:"number",prompt:"Slab Thickness (centimetres)",value:null,options:{min:10,max:500,step:10}},slabWidth:{type:"number",prompt:"Slab Width (meters)",value:null,options:{min:1,max:3e3,step:100}},runLength:{type:"number",prompt:"Run length (meters)",options:{min:1,max:1e4,step:100},value:null,helpText:"Length from crown to toe of debris."},avalancheCharacter:{type:"checkbox",prompt:"Avalanche Character",limit:3,options:{"Loose wet":!1,"Loose dry":!1,"Storm slab":!1,"Persistent slab":!1,"Deep persistent slab":!1,"Wet slab":!1,"Cornice only":!1,"Cornice with slab":!1}},triggerType:{type:"dropdown",prompt:"Trigger Type",options:["Natural","Skier","Snowmobile","Other Vehicle","Helicopter","Explosives"],value:null},triggerSubtype:{type:"dropdown",prompt:"Trigger Subtype",value:null,options:["Accidental","Intentional","Remote"],helpText:"A remote trigger is when the avalanche starts some distance away from where the trigger was  applied."},triggerDistance:{type:"number",prompt:"Remote Trigger Distance (metres)",options:{min:0,max:2e3,step:50},helpText:"If a remote trigger, enter how far from the trigger point is the nearest part of the crown.",value:null},startZoneAspect:{type:"radio",inline:!0,prompt:"Start Zone Aspect",options:["N","NE","E","SE","S","SW","W","NW"],value:null},startZoneElevationBand:{prompt:"Start Zone Elevation Band",type:"radio",inline:!0,options:["Alpine","Treeline","Below Treeline"],value:null},startZoneElevation:{type:"number",prompt:"Start Zone Elevation (metres above sea level)",options:{min:0,max:5e3,step:50},value:null},startZoneIncline:{type:"number",prompt:"Start Zone Incline",options:{min:0,max:90,step:5},value:null},runoutZoneElevation:{type:"number",prompt:"Runout Zone Elevation (metres above sea level)",options:{min:0,max:5e3,step:50},helpText:"The lowest point of the debris.",value:null},weakLayerBurialDate:{prompt:"Weak Layer Burial Date",type:"datetime",helpText:"Date the weak layer was buried."},weakLayerCrystalType:{type:"checkbox",prompt:"Weak Layer Crystal Type",limit:2,options:{"Surface hoar":!1,Facets:!1,"Surface hoar and facets":!1,"Depth hoar":!1,"Storm snow":!1}},crustNearWeakLayer:{prompt:"Crust Near Weak Layer",type:"radio",inline:!0,options:["Yes","No"],value:null},windExposure:{type:"dropdown",prompt:"Wind Exposure",options:["Lee slope","Windward slope","Down flow","Cross-loaded slope","Reverse-loaded slope","No wind exposure"],value:null},vegetationCover:{type:"dropdown",prompt:"Vegetation cover",value:null,options:["Open slope","Sparse trees or gladed slope","Dense trees"]}};return{fields:e}}),angular.module("acComponents.services").factory("acBreakpoint",["$rootScope","$timeout","$window",function(e,a,t){return{setBreakpoints:function(n){function o(){var o,r=$(t).width();o=r<n.xs?"xs":r>=n.xs&&r<n.sm?"sm":r>=n.sm&&r<n.md?"md":"lg",i&&o===i||(i=o,a(function(){e.$broadcast("breakpoint",i)},0))}var i;o(),angular.element(t).bind("resize",o)}}}]),angular.module("acComponents.services").factory("acForecast",["$http","$q","acImageCache","AC_API_ROOT_URL",function(e,a,t,n){var o,i=n;return{fetch:function(){var t=a.defer();return o?t.resolve(o):e.get(i+"/api/forecasts").then(function(e){o=e.data,t.resolve(o)}),t.promise},getOne:function(t){return a.when(this.fetch()).then(function(){var a=_.find(o.features,{id:t});return e.get(i+a.properties.forecastUrl).then(function(e){return e.data})})},getDangerIconUrl:function(e){var a=_.find(o.features,{id:e});return n+a.properties.dangerIconUrl}}}]),angular.module("acComponents.services").factory("acFormUtils",function(){function e(e){_.forEach(e,function(e){angular.isDefined(e.type)&&(e.getDTO=i[e.type].getDTO.bind(e))})}function a(a){return e(a),_.reduce(a,function(e,a,t){return e[t]=a.getDTO(),e},{})}function t(e){_.forEach(e,function(e){angular.isDefined(e.type)&&(e.validate=i[e.type].validate.bind(e))})}function n(e){return t(e),_.reduce(e,function(e,a){return a.validate()||e.push(a.prompt),e},[])}var o={getDTO:function(){return this.value},validate:function(){return!0}},i={checkbox:{getDTO:function(){return this.options},validate:function(){var e=_.reduce(this.options,function(e,a){return a&&e++,e},0);return e<=this.limit}},number:{getDTO:function(){return this.value},validate:function(){return null==this.value||parseInt(this.value)>=this.options.min&&parseInt(this.value)<=this.options.max}},dropdown:o,textarea:o,radio:o,datetime:o};return{getDTOForFileds:a,validateFields:n}}),angular.module("acComponents.services").factory("acImageCache",["$http",function(e){return{cache:function(a){a.forEach(function(a){e.get(a)})}}}]),angular.module("acComponents.services").factory("acIncidentReportData",function(){var e={incidentDescription:{prompt:"Incident Description. No names and no judging please.",type:"textarea",value:null},groupActivity:{type:"checkbox",prompt:"Activity",options:{Snowmobiling:!1,Skiing:!1,"Climbing/Mountaineering":!1,"Hiking/Scrambling":!1,Snowshoeing:!1,Tobogganing:!1,Other:!1},helpText:"If other, please describe in Incident Description."},groupSize:{type:"number",prompt:"Number of people in the group",options:{min:0,max:100},value:null},numberFullyBuried:{type:"number",prompt:"Number of people fully buried",options:{min:0,max:100},value:null},numberPartlyBuriedImpairedBreathing:{type:"number",prompt:"Number of people partly buried, breathing impaired",options:{min:0,max:100},value:null},numberPartlyBuriedAbleBreathing:{type:"number",prompt:"Number of people partly buried, able to breathe normally",options:{min:0,max:100},value:null},numberCaughtOnly:{type:"number",prompt:"Number of people caught and not buried",options:{min:0,max:100},value:null},numberPeopleInjured:{type:"number",prompt:"Number of people caught only and not fully or partly buried",options:{min:0,max:400},value:null},terrainShapeTriggerPoint:{type:"radio",inline:!0,prompt:"Terrain shape at Trigger Point",options:["Convex","Planar","Concave","Unsupported"],value:null,helpText:"Convex: a roll. Concave: bowl-shaped. Planar: smooth with no significant convexities or concavities. Unsupported: a slope that drops off abruptly at the bottom."},snowDepthTriggerPoint:{type:"radio",inline:!0,prompt:"Snow depth at Trigger Point",options:["Shallow","Deep","Average","Variable"],helpText:"The depth of the snowpack compared to the average conditions in the area. Shallow: shallower than average. Deep: deeper than average. Average: about the same as everywhere else. Variable: depth varies significantly in the place where the avalanche started.",value:null},terrainTrap:{type:"checkbox",prompt:"Terrain Trap",options:{"No obvious terrain trap":!1,"Gully or depression":!1,"Slope transition or bench":!1,Trees:!1,Cliff:!1},helpText:"Terrain traps are features that increase the consequences of an avalanche."}};return{fields:e}}),angular.module("acComponents.services").factory("acObservation",["$http","AC_API_ROOT_URL",function(e,a){var t=a+"/api/min/observations";return{byPeriod:function(a){var n={params:{last:a||"2:days"}};return e.get(t,n).then(function(e){return e.data})},getOne:function(a,n){var n="."+n||"",o=t+"/"+a+n;return e.get(o).then(function(e){return e.data})}}}]),angular.module("acComponents.services").service("acQuickReportData",function(){this.avalancheConditions={slab:!1,sound:!1,snow:!1,temp:!1},this.ridingConditions={ridingQuality:{prompt:"Riding quality was:",type:"single",options:["Amazing","Good","OK","Terrible"],selected:null},snowConditions:{type:"multiple",prompt:"Snow conditions were:",options:{Crusty:!1,Powder:!1,"Deep powder":!1,Wet:!1,Heavy:!1,"Wind affected":!1,Hard:!1}},rideType:{type:"multiple",prompt:"We rode:",options:{"Mellow slopes":!1,"Steep slopes":!1,"Convex slopes":!1,"Sunny slopes":!1,"Cut-blocks":!1,"Open trees":!1,"Dense trees":!1,"Alpine slopes":!1}},stayedAway:{type:"multiple",prompt:"We stayed away from:",options:{"Steep slopes":!1,"Convex slopes":!1,"Sunny slopes":!1,"Cut-blocks":!1,"Open trees":!1,"Alpine slopes":!1}},weather:{type:"multiple",prompt:"The day was:",options:{Stormy:!1,Windy:!1,Sunny:!1,Cold:!1,Warm:!1,Cloudy:!1,Foggy:!1,Wet:!1}}}}),angular.module("acComponents.services").factory("acSnowpackReportData",function(){var e={snowpackObsType:{type:"radio",prompt:"Is this a point observation or a summary of your day?",options:["Point Observation","Summary"],value:null,helpText:"Please add additional information about the snowpack, especially notes about weak layer, how the snow varied by aspect/elevation, and details of any slope testing performed."},snowpackObsComment:{type:"textarea",prompt:"Snowpack Observation Comment",value:null},snowpackSiteElevation:{type:"number",prompt:"Snowpack Site Elevation (metres above sea level)",options:{min:0,max:4e3},value:null},snowpackSiteElevationBand:{type:"radio",prompt:"Snowpack Site Elevation Band",options:["Alpine","Treeline","Below Treeline"],value:null},snowpackSiteAspect:{type:"radio",prompt:"Snowpack Site Aspect",options:{N:!1,NE:!1,E:!1,SE:!1,S:!1,SW:!1,W:!1,NW:!1}},snowpackDepth:{type:"number",prompt:"Snowpack Depth (centimetres)",options:{min:0,max:1e4},helpText:"Total height of snow in centimetres. Averaged if this is a summary."},snowpackWhumpfingObserved:{type:"radio",prompt:"Did you observe whumpfing?",options:["Yes","No"],selected:null,helpText:"A whumpf is a rapid settlement of the snowpack caused by the collapse of a weak layer. It is accompanied by an audible noise."},snowpackCrackingObserved:{type:"radio",prompt:"Did you observe cracking?",options:["Yes","No"],selected:null,helpText:"Cracking is shooting cracks radiating more than a couple of metres from your sled or skis. "},snowpackSurfaceCondition:{type:"checkbox",prompt:"Surface condition",options:{"New Snow":!1,Crust:!1,"Surface Hoar":!1,Facets:!1,Corn:!1,Variable:!1}},snowpackFootPenetration:{type:"number",prompt:"Foot Penetration (centimeters)",options:{min:0,max:200},helpText:"How far you sink into the snow when standing on one fully-weighted foot."},snowpackSkiPenetration:{type:"number",prompt:"Ski Penetration (centimeters)",options:{min:0,max:200},helpText:"How far  you sink into the snow when standing on one fully-weighted ski."},snowpackSledPenetration:{type:"number",prompt:"Sled Penetration (centimeters)",options:{min:0,max:200},helpText:"The depth a sled sinks into the snow after stopping slowly on level terrain."},snowpackTestInitiation:{type:"radio",prompt:"Snowpack Test Result",options:["None","Very Easy","Easy","Moderate","Hard"],helpText:"Average if you did a number of tests."},snowpackTestFracture:{type:"multiple",prompt:"Snowpack Test Fracture Character",options:['Sudden ("Pop" or "Drop")',"Resistant","Uneven break"],helpText:"Average if you did a number of tests. Describe further in comments if variable results."},snowpackTestFailure:{type:"number",prompt:"Snowpack Test Failure Depth",options:{min:0,max:200},helpText:"Depth below the surface that failure occurred."}};return{fields:e}}),angular.module("acComponents.services").factory("acSubmission",["$q","$http","AC_API_ROOT_URL",function(e,a,t){function n(e){return e.size<l&&-1!==s.indexOf(e.type)}function o(e){return _.reduce(e,function(e,a){return e&&n(a)},!0)}function i(a){var t=e.defer();if(o(a.files)){var n=_.reduce(a,function(e,a,t){return"files"===t?_.forEach(a,function(a,t){e.append("file"+t,a,a.name)}):_.isPlainObject(a)||_.isArray(a)?e.append(t,JSON.stringify(a)):"datetime"===t?e.append(t,moment(a,"YYYY-MM-DD hh:mm A").format()):_.isString(a)&&e.append(t,a),e},new FormData);t.resolve(n)}else t.reject(c);return t.promise}var r=t+"/api/min/submissions",l=25e6,s=["image/png","image/jpeg"],c="Invalid file! Files have to be smaller than 25 MB and of type: "+s.join(", ");return{submit:function(e,t){return i(e).then(function(e){return a.post(r,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:"Bearer "+t}})})},byPeriod:function(e){var t={params:{period:e||"2:days"}};return a.get(r,t).then(function(e){return e.data})},getOne:function(e,t){return a.get(r).then(function(e){return e.data})}}}]),angular.module("acComponents.templates",[]).run(["$templateCache",function(e){e.put("danger-icon.html",'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="398.5 12.1 555 560" enable-background="new 398.5 12.1 555 560" xml:space="preserve" class="danger-icon"><polygon id="alp" points="747.7,218.1 623.1,197.6 678.8,109.8"></polygon><polygon id="tln" points="794.2,291 542.8,323.6 616.7,207.4 755.5,230.3"></polygon><polygon id="btl" points="858.3,391.8 499.4,391.8 535.1,335.5 800.6,301.1"></polygon></svg>'),e.put("drawer.html",'<div class="ac-drawer"><style>.ac-drawer-tools {\n    z-index: -200;\n}\n\n.ac-date-filters {\n    background-color: transparent;\n}\n\n.ac-date-filters ul {\n    position: relative;\n    width: 250px;\n}\n\n.ac-date-filters ul.expanded {\n    right: 200px;\n}\n\n.ac-date-filters ul li {\n    color: rgba(255, 255, 255, 0.2);\n}\n\n.ac-date-filters ul li.on {\n    color: rgb(0, 86, 183);\n}\n\n.ac-date-filters ul li i {\n    padding-top: 5px;\n    margin-left: 8px;\n}\n\n.ac-date-filters ul li span {\n    display: block;\n    font-size: 0.7em;\n    padding-left: 4px;\n}\n</style><a ng-click="drawer.visible = false" class="ac-drawer-close visible-xs"><i class="fa fa-close fa-lg"></i></a><div class="ac-drawer-tools"><ul><li ng-click="drawer.enabled = !drawer.enabled; regionsVisible = !regionsVisible;" ng-class="{on: drawer.visible &amp;&amp; drawer.enabled}" style="margin-bottom: 50px;"><div ac-danger-icon="ac-danger-icon" style="height: 50px; width:50px;"></div></li><li ng-click="toggleFilter()" ng-class="{on: filters.obsPeriod !== \'\'}" style="padding-top: 11px; padding-left: 15px;"><i class="fa fa-map-marker fa-inverse fa-2x"></i></li><li ng-click="expanded = true" style="background-color: transparent;" class="ac-date-filters"><ul ng-class="{expanded: expanded}" ng-init="expanded = false" class="list-inline"><li ng-repeat="dateFilter in dateFilters" ng-click="toggleFilter(\'obsPeriod:\'+dateFilter)" ng-class="{on: filters.obsPeriod === dateFilter}"><i class="fa fa-calendar fa-inverse fa-2x"></i><span>{{ dateFilter }}</span></li></ul></li></ul></div><div ng-transclude="ng-transclude" class="ac-drawer-body"></div></div>'),e.put("forecast-mini.html",'<div class="panel"><div ng-show="forecast.externalUrl" style="min-height: 500px;" class="panel-body"><div class="row"><div class="col-xs-12"><h3 class="ac-forecast-region">{{ forecast.name }}</h3></div></div><div class="row"><div class="col-xs-12"><p>Avalanche information for this region is available &nbsp;<a ng-href="{{forecast.externalUrl}}" target="_blank"><i class="fa fa-external-link">here.</i></a></p></div></div></div><div ng-show="forecast.parksUrl" style="min-height: 500px;" class="panel-body"><div class="row"><div class="col-xs-12"><h3 class="ac-forecast-region">{{ forecast.name }}</h3></div></div><div class="row"><div class="col-xs-12"><p>Avalanche information for this region is available &nbsp;<a ng-href="{{forecast.parksUrl}}" target="_blank"><i class="fa fa-external-link">here.</i></a></p></div></div></div><div ng-hide="forecast.externalUrl || forecast.parksUrl" class="panel-body ac-forecast-mini-body"><div class="row"><div class="col-xs-6"><h4 class="ac-forecast-region">{{ forecast.bulletinTitle | acNormalizeForecastTitle }}</h4></div><div ng-if="forecast.region == &quot;kananaskis&quot;" class="col-xs-6"><a target="_blank" href="" class="pull-right"><img style="width:75px;" src="http://www.avalanche.ca/assets/images/kananaskis.jpg"/></a></div><div ng-if="!(forecast.region == &quot;kananaskis&quot;)" class="col-xs-6"><a target="_blank" href="{{sponsor.getText(&quot;sponsor.url&quot;)}}" class="pull-right"><img src="{{sponsor.getText(&quot;sponsor.image-229&quot;)}}"/></a></div></div><div class="row ac-forecast-dates"><div class="col-md-6"><dl><dd class="small"><strong class="ac-text-primary">DATE ISSUED</strong></dd><dt class="small"><span class="ac-text-default">{{ forecast.dateIssued | date:\'EEEE MMMM d, y h:mm a\'  | uppercase }}</span></dt></dl></div><div class="col-md-6"><dl><dd class="small"><strong class="ac-text-primary">VALID UNTIL</strong></dd><dt class="small"><span class="ac-text-default">{{ forecast.validUntil | date:\'EEEE MMMM d, y h:mm a\' | uppercase }}</span></dt></dl></div></div><div class="row"><div class="col-xs-12"><p class="ac-forecast-highlights"><strong ng-bind-html="forecast.highlights"></strong></p></div></div><div class="row"><div class="col-xs-12"><ul role="tablist" class="nav nav-pills"><li class="active"><a href="" role="tab" data-target="#forecast" data-toggle="tab">Forecast</a></li><li><a href="" role="tab" data-target="#problems" data-toggle="tab">Problems</a></li><li><a href="" role="tab" data-target="#details" data-toggle="tab">Details</a></li><li><a href="/forecasts/{{forecast.region}}" role="tab" data-toggle="tab">Full Page</a></li><li><a href="/weather" role="tab" data-toggle="tab">Weather</a></li><li><a href="/submit" role="tab" data-toggle="tab">Submit</a></li></ul><div class="tab-content"><div id="forecast" class="tab-pane active"><div class="row"><div class="col-xs-12"><div class="panel panel-primary"><div class="panel-heading">{{ forecast.dangerRatings[0].date | dateUtc:\'dddd\' }}</div><div class="panel-body ac-forecast-nowcast"><img ng-show="forecast.region" ng-src="{{forecast.region &amp;&amp; apiUrl+\'/api/forecasts/\' + forecast.region  + \'/nowcast.svg\' || \'\'}}" class="ac-nowcast"/></div><table class="table table-condensed ac-forecast-days"><thead class="ac-thead-dark"><tr><th></th><th>{{ forecast.dangerRatings[1].date | dateUtc:\'dddd\' }}</th><th>{{ forecast.dangerRatings[2].date | dateUtc:\'dddd\' }}</th></tr></thead><tbody><tr><td class="ac-veg-zone--alp"><strong>Alpine</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.alp.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.alp.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.alp.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.alp.replace(\':\', \' \') }}</strong></td></tr><tr><td class="ac-veg-zone--tln"><strong>Treeline</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.tln.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.tln.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.tln.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.tln.replace(\':\', \' \') }}</strong></td></tr><tr><td class="ac-veg-zone--btl"><strong>Below Treeline</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.btl.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.btl.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.btl.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.btl.replace(\':\', \' \') }}</strong></td></tr><tr><td><strong>Confidence:</strong></td><td colspan="2"><span class="ac-text-default">{{ forecast.confidence }}</span></td></tr></tbody></table><footer id="forecast-bulletin" class="col-xs-12"></footer><div class="panel-group"><div class="panel panel-default first"><h4 class="panel-title"><a href="" data-target="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="collapsed">{{dangerRating.getText(\'generic.title\')}}</a></h4><div id="collapseTwo" class="collapse"><div ng-bind-html="dangerRating.getStructuredText(\'generic.body\').asHtml(ctx)" class="panel-body"></div></div></div><div class="panel panel-default last"><h4 class="panel-title"><a href="" data-target="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="collapsed">{{disclaimer.getText(\'generic.title\')}}</a></h4><div id="collapseOne" class="collapse"><div ng-bind-html="disclaimer.getStructuredText(\'generic.body\').asHtml(ctx)" class="panel-body"></div></div></div></div></div></div></div></div><div id="problems" class="tab-pane"><div id="problemsAccordion" class="panel-group"><div ng-repeat="problem in forecast.problems" class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#problem{{$index}}" data-toggle="collapse" data-parent="#problemsAccordion">{{ problem.type }}<i class="fa fa-fw fa-level-down pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="problem{{$index}}" class="panel-collapse collapse"><div class="panel-body"><div class="row"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">What Elevations?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--elevations"><img ng-src="{{problem.icons.elevations}}" class="center-block"/></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">What Aspects?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--aspects"><img ng-src="{{problem.icons.aspects}}" class="center-block"/></div></div></div></div><div class="row"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">Chances of Avalanches?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--likelihood"><img ng-src="{{problem.icons.likelihood}}" class="center-block"/></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">Expected Size?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--expected-size"><img ng-src="{{problem.icons.expectedSize}}" class="center-block"/></div></div></div></div><div class="row"><div class="col-md-12"><p ng-bind-html="problem.comment" class="ac-problem narative"></p><div class="panel panel-default ac-problem-travel-advice"><div class="panel-heading"><strong class="small">Travel and Terrain Advice</strong></div><div class="panel-body"><p ng-bind-html="problem.travelAndTerrainAdvice"></p></div></div></div></div></div></div></div></div></div><div id="details" class="tab-pane"><div id="detailsAccordion" class="panel-group"><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#avalancheSummary" data-toggle="collapse" data-parent="#detailsAccordion">Avalanche Summary<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="avalancheSummary" class="panel-collapse collapse"><div ng-bind-html="forecast.avalancheSummary" class="panel-body"></div></div></div><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#snowpackSummary" data-toggle="collapse" data-parent="#detailsAccordion">Snowpack Summary<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="snowpackSummary" class="panel-collapse collapse"><div ng-bind-html="forecast.snowpackSummary" class="panel-body"></div></div></div><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#weatherForecast" data-toggle="collapse" data-parent="#detailsAccordion">Weather Forecast<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="weatherForecast" class="panel-collapse collapse"><div ng-bind-html="forecast.weatherForecast" class="panel-body"></div></div></div></div></div></div></div></div></div></div>'),e.put("loading-indicator.html",'<div class="ac-loading-indicator"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),e.put("min-report-form.html",'<div class="min-form"><form name="acMinForm" ng-submit="submitForm()" ng-show="!report.subid" role="form"><div ng-class="{\'has-error\': !acMinForm.title.$valid}" class="form-group"><label for="title"><i class="fa fa-newspaper-o"></i> Report title</label><input type="text" name="title" ng-model="report.title" required="required" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.datetime.$valid}" class="form-group"><label for="datetime"><i class="fa fa-clock-o"></i> Date and Time</label><input type="datetime" name="datetime" ng-model="report.datetime" ac-datetime-picker="ac-datetime-picker" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.latlng.$valid}" class="form-group"><label for="latlng"><i class="fa fa-map-marker"></i> Location</label><div ac-location-select="ac-location-select" latlng="report.latlng" style="height: 300px; width: 100%; margin: 10px 0;"></div><input type="text" name="latlng" ng-model="report.latlng" placeholder="Drop pin on map to set location" required="required" class="form-control"/></div><div class="form-group"><label for="uploads"><i class="fa fa-image"></i> Add photo<small style="font-weight: normal;"> .jpg or .png</small></label><input type="file" name="uploads" file-model="report.files" accept=".png,.jpg,.jpeg" multiple="multiple" class="form-control"/><div>{{ report.files.length }} photos added</div></div><!--Quick report--><div class="panel-group"><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title">Riding conditions:</h4></div><div class="panel-body"><div class="panel-group"><div ng-repeat="(item, ridingCondition) in report.obs.quickReport.ridingConditions" class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><strong>{{ ridingCondition.prompt }}</strong></h4></div><div class="panel-body"><div class="form-group"></div><div ng-if="ridingCondition.type==\'multiple\'" ng-repeat="(option, enabled) in ridingCondition.options" class="checkbox"><label><input type="checkbox" ng-model="ridingCondition.options[option]"/>{{option}}</label></div><div ng-if="ridingCondition.type==\'single\'" ng-repeat="option in ridingCondition.options" class="radio"><label><input type="radio" ng-model="ridingCondition.selected" ng-value="option"/>{{option}}</label></div></div></div></div></div></div><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title"><strong>Avalanche conditions</strong></h4></div><div class="panel-body"><div class="form-group"><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.slab"/>Slab avalanches today or yesterday.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.sound"/>Whumphing or drum-like sounds or shooting cracks.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.snow"/>30cm + of new snow, or significant drifitng, or rain in the last 48 hours.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.temp"/>Rapid temperature rise to near zero degrees or wet surface snow.</label></div></div></div></div></div><div class="form-group"><label>Comments</label><textarea rows="3" ng-model="report.obs.quickReport.comment" class="form-control"></textarea></div><!--Avalanche report--><div class="panel-group"><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title">Avalanche report</h4></div><div class="panel-body"><div class="panel-group"><div ng-repeat="(item, av) in report.obs.avalancheReport.fields" class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><strong>{{ av.prompt }}</strong></h4></div><div class="panel-body"><div class="form-group"></div><p>{{av.helpText}}</p><div ng-if="av.type==\'checkbox\'" ng-repeat="(option, enabled) in av.options" class="checkbox"><label><input type="checkbox" ng-model="av.options[option]"/>{{option}}</label></div><div ng-if="av.type==\'radio\'" ng-repeat="option in av.options" class="radio"><label><input type="radio" ng-model="av.value" value="{{option}}"/>{{option}}</label></div><div ng-if="av.type==\'number\'" class="number"><label><input type="number" max="{{av.options.max}}" min="{{av.options.min}}" ng-model="av.value"/></label></div><div ng-if="av.type==\'dropdown\'" class="select"><select ng-options="option for option in av.options" ng-model="av.value"></select></div><div ng-if="av.type==\'textarea\'" class="textarea"><textarea rows="3" ng-model="av.value" class="form-control"></textarea></div><div ng-if="av.type==\'datetime\'" class="datetime-input"><label for="datetime"></label><input type="datetime" name="datetime-avalanche" ng-model="av.value" ac-datetime-picker="ac-datetime-picker" placeholder="Click to select date" class="form-control"/></div></div></div></div></div></div></div><input type="submit" id="submit" value="Submit" ng-disabled="minsubmitting" style="border-radius:0; background-color: rgb(0, 86, 183); color: white;" class="btn btn-default"/><i ng-show="minsubmitting" class="fa fa-fw fa-lg fa-spinner fa-spin"></i></form><div ng-show="report.subid"><div role="alert" class="alert alert-success">Your report was successfully submited.</div><div class="well"><H4>Share this report:</H4><ul class="list-inline"><li><a ng-href="https://twitter.com/intent/tweet?status={{report.shareUrl}}"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a ng-href="https://www.facebook.com/sharer/sharer.php?u={{report.shareUrl}}"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a ng-href="https://plus.google.com/share?url={{report.shareUrl}}"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div></div><div ng-show="minerror"><div role="alert" class="alert alert-danger"><p>There was an error submittting you report.</p><p ng-if="minerrormsg">{{minerrormsg}}</p><div ng-if="validationErrors">Please checkout the following fields:<p ng-repeat="(tab, fields) in validationErrors"><span class="firstCapital">{{tab}} - {{fields}}</span></p></div></div></div></div>'),e.put("min-report-form2.html",'<div class="min-form"><form name="acMinForm" ng-submit="submitForm()" ng-show="!report.subid &amp;&amp; !minerror" role="form"><div ng-class="{\'has-error\': !acMinForm.title.$valid}" class="form-group"><label for="title"><i class="fa fa-newspaper-o"></i>Report title</label><input type="text" name="title" ng-model="report.title" required="required" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.datetime.$valid}" class="form-group"><label for="datetime"><i class="fa fa-clock-o"></i>Date and Time</label><input type="datetime" name="datetime" ng-model="report.datetime" ac-datetime-picker="ac-datetime-picker" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.latlng.$valid}" class="form-group"><label for="latlng"><i class="fa fa-map-marker"></i>Location</label><div ac-location-select="ac-location-select" latlng="report.latlng" style="height: 300px; width: 100%; margin: 10px 0;"></div><input type="text" name="latlng" ng-model="report.latlng" placeholder="Drop pin on map to set location" required="required" class="form-control"/></div><div class="form-group"><label for="uploads"><i class="fa fa-image"></i>Add photo<small style="font-weight: normal;"> .jpg or .png</small></label><input type="file" name="uploads" file-model="report.files" accept=".png,.jpg,.jpeg" multiple="multiple" class="form-control"/><div>{{ report.files.length }} photos added</div></div><div class="panel-group"><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title">Avalanche Report</h4></div><div class="panel-body"><div class="panel-group"><div ng-repeat="(item, av) in report.obs.avalancheReport" class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><strong>{{ av.prompt }}</strong></h4></div><div class="panel-body"><div class="form-group"></div><div ng-if="av.type==\'checkbox\'" ng-repeat="(option, enabled) in av.options" class="checkbox">{{option}}<label><input type="checkbox" ng-model="report.avs[item].options[option]"/>{{option}}</label></div><div ng-if="av.type==\'single\'" ng-repeat="option in av.options" class="radio"><label><input type="radio" ng-model="report.avs[item].selected" ng-value="option"/>{{option}}</label></div></div></div></div></div></div></div><div class="panel-group"><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title">Riding\nconditions</h4></div><div class="panel-body"><div class="panel-group"><div ng-repeat="(item, ridingCondition) in report.obs.quickReport.ridingConditions" class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><strong>{{ ridingCondition.prompt }}</strong></h4></div><div class="panel-body"><div class="form-group"></div><div ng-if="ridingCondition.type==\'multiple\'" ng-repeat="(option, enabled) in ridingCondition.options" class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.ridingConditions[item].options[option]"/>{{option}}</label></div><div ng-if="ridingCondition.type==\'single\'" ng-repeat="option in ridingCondition.options" class="radio"><label><input type="radio" ng-model="report.obs.quickReport.ridingConditions[item].selected" ng-value="option"/>{{option}}</label></div></div></div></div></div></div><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title"><strong>Avalanche conditions</strong></h4></div><div class="panel-body"><div class="form-group"><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.slab"/>Slab\navalanches today or yesterday.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.sound"/>Whumphing or\ndrum-like sounds or shooting cracks.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.snow"/>30cm\n+ of new snow, or significant drifitng, or rain in the last 48 hours.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.obs.quickReport.avalancheConditions.temp"/>Rapid\ntemperature rise to near zero degrees or wet surface snow.</label></div></div></div></div></div><div class="form-group"><label>Comments</label><textarea rows="3" ng-model="report.comment" class="form-control"></textarea></div><input id="submit" type="submit" value="Submit" ng-disabled="minsubmitting" style="border-radius:0; background-color: rgb(0, 86, 183); color: white;" class="btn btn-default"/><i ng-show="minsubmitting" class="fa fa-fw fa-lg fa-spinner fa-spin"></i></form><div ng-show="report.subid"><div role="alert" class="alert alert-success">Your report was successfully submited.</div><div class="well"><h4>Share this report:</h4><ul class="list-inline"><li><a ng-href="https://twitter.com/intent/tweet?status={{report.shareUrl}}"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a ng-href="https://www.facebook.com/sharer/sharer.php?u={{report.shareUrl}}"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a ng-href="https://plus.google.com/share?url={{report.shareUrl}}"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div></div><div ng-show="minerror"><div role="alert" class="alert alert-danger"><p>There was an error submittting you report.</p><p>{{minerrormsg}}</p></div></div></div>'),e.put("min-report-modal.html",'<div id="minForm" role="dialog" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button data-dismiss="modal" class="close"><span>close</span></button><h4 class="modal-title">Mountain Information Network Report</h4></div><div class="modal-body"><div ac-min-report-form="ac-min-report-form"></div></div></div></div></div>'),e.put("min-report-popup-modal.html",'<div id="mobileMapPopup" role="dialog" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"></div>                <a href="#" data-dismiss="modal" style="position: absolute; right: 10px; top: 10px;" class="pull-right"><i class="fa fa-close fa-lg"></i></a></div></div></div>'),e.put("social-share.html",'<div class="well"><H4>Share this report:</H4><ul class="list-inline"><li><a href="https://twitter.com/intent/tweet?url=http://avalanche.ca"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a href="https://www.facebook.com/sharer/sharer.php?u=http://avalanche.ca"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a href="https://plus.google.com/share?url=http://avalanche.ca"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div>')
}])}();