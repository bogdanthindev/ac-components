!function(){angular.module("acComponents.config",[]).value("acComponents.config",{debug:!0}).constant("AC_API_ROOT_URL","http://avalanche-canada-dev.elasticbeanstalk.com"),angular.module("acComponents.directives",[]),angular.module("acComponents.filters",[]),angular.module("acComponents.services",[]),angular.module("acComponents",["acComponents.config","acComponents.directives","acComponents.filters","acComponents.services","acComponents.templates","ngSanitize"]),angular.module("acComponents.directives").directive("acDangerIcon",function(){return{replace:!0,templateUrl:"danger-icon.html",link:function(){}}}),angular.module("acComponents.directives").directive("acDatetimePicker",function(){return function(){if(jQuery().datetimepicker){var e={format:"YYYY-MM-DD hh:mm A"};$(".min-form").first().find('[type="datetime"]').datetimepicker(e)}}}),angular.module("acComponents.directives").directive("acDrawer",function(){return{replace:!0,transclude:!0,templateUrl:"drawer.html",link:function(e){e.expanded=!1,e.toggleObs=function(){e.$emit("ac.acDraw.toggleObs")},e.toggleDate=function(a){e.expanded=!e.expanded,e.$emit("ac.acDraw.toggleDate",a)}}}}),angular.module("acComponents.directives").directive("acForecastMini",["AC_API_ROOT_URL",function(e){return{templateUrl:"forecast-mini.html",scope:{forecast:"=acForecast"},link:function(a,t){t.addClass("ac-forecast-mini"),a.apiUrl=e,a.externalLinkClicked=function(e){a.$emit("ac.acForecastMini.linkClicked",e)}}}}]),angular.module("acComponents.directives").directive("acLoadingIndicator",function(){return{templateUrl:"loading-indicator.html",replace:!0,link:function(){}}}),angular.module("acComponents.directives").directive("acLocationSelect",["MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID","$timeout",function(e,a,t){return{scope:{latlng:"="},link:function(n,i){function o(e){t(function(){n.latlng=[e.lat,e.lng]},0)}var r,l;L.mapbox.accessToken=e,$("#minForm").on("shown.bs.modal",function(){r.invalidateSize()}),r=L.mapbox.map(i[0],a,{attributionControl:!1,scrollWheelZoom:!1}).on("click",function(e){l?l&&!r.hasLayer(l)&&(o(e.latlng),l.setLatLng(e.latlng).addTo(r).openPopup()):(o(e.latlng),l=L.marker(e.latlng,{icon:L.mapbox.marker.icon({"marker-color":"f79118"}),draggable:!0}),l.bindPopup("Position: "+e.latlng.toString().substr(6)+"<br/>(drag to relocate)").addTo(r).openPopup(),l.on("dragend",function(){var e=l.getLatLng();l.setPopupContent("Position: "+e.toString().substr(6)+"<br/>(drag to relocate)"),l.openPopup(),o(e)}))}),r.setView([52.3,-120.74966],5),n.$watch("latlng",function(e){l&&0===e.length&&r.removeLayer(l)})}}}]),angular.module("acComponents.directives").directive("acMapboxMap",["$rootScope","$window","$location","$timeout","acBreakpoint","acObservation","acForecast","MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID",function(e,a,t,n,i,o,r,l,s){return{template:'<div id="map"></div>',replace:!0,scope:{region:"=acRegion",regions:"=acRegions",showRegions:"=acShowRegions",obs:"=acObs",ob:"=acOb"},link:function(c,d,p){function g(e){return function(){d.height($(a).height()-Number(e)),O.invalidateSize()}}function m(e){var a=O.getZoom()<=6?60:80;return L.icon({iconUrl:e.iconUrl||r.getDangerIconUrl(e.regionId),iconSize:[a,a],labelAnchor:[6,0]})}function u(){S.regions=L.geoJson(c.regions,{style:function(){return A.region.default},onEachFeature:function(e,a){function t(){if(O.getZoom()<9){var e=y();O.fitBounds(a.getBounds(),{paddingBottomRight:e})}S.currentRegion=a,c.$apply(function(){c.region=a})}if(a.bindLabel(e.properties.name),a.on("click",t),a.on("mouseover",function(){a==S.currentRegion?a.setStyle(A.region.selectedhover):a.setStyle(A.region.hover)}),a.on("mouseout",function(){a==S.currentRegion?a.setStyle(A.region.selected):a.setStyle(A.region.default)}),e.properties.centroid){var n=L.latLng(e.properties.centroid[1],e.properties.centroid[0]),i=L.marker(n),o=m({regionId:e.id});i.setIcon(o);var r=1;i.setZIndexOffset(r),i.on("click",function(){t()}),S.dangerIcons.addLayer(i)}}}),v()}function f(){S.dangerIcons.eachLayer(function(e){var a=e.options.icon.options.iconUrl,t=m({iconUrl:a});e.setIcon(t)})}function v(){var e=O.getZoom();if(S.regions&&c.showRegions){var a=O.hasLayer(S.regions);6>e&&a?O.removeLayer(S.regions):e>=6&&!a?O.addLayer(S.regions):e>10&&a&&O.removeLayer(S.regions)}if(S.dangerIcons){var t=O.hasLayer(S.dangerIcons);O.getZoom()<6&&t?O.removeLayer(S.dangerIcons):O.getZoom()>=6&&!t&&O.addLayer(S.dangerIcons);var n=S.dangerIcons.getLayers()[0];if(n){var i=n.options.icon.options.iconSize[0];(e>6&&60===i||6>=e&&80===i)&&f()}}S.obs&&O.addLayer(S.obs);var o=.2;if(S.currentRegion&&c.showRegions)if(9>=e)A.region.selected.fillOpacity=o,S.currentRegion.setStyle(A.region.selected);else if(e>9&&13>e){switch(e){case 10:o=.15;break;case 11:o=.1;break;case 12:o=.05}A.region.selected.fillOpacity=o,S.currentRegion.setStyle(A.region.selected)}else S.currentRegion.setStyle(A.region.default)}function h(){if(O.hasLayer(S.obs)&&O.removeLayer(S.obs),c.obs.length>0){var e=c.obs.map(function(e){var a=L.marker(e.latlng,{icon:L.mapbox.marker.icon({"marker-size":"small","marker-color":"#09c"})});return a.on("click",function(){o.getOne(e.obid,"html").then(function(e){c.$emit("ac.min.obclicked",e)})}),a.setZIndexOffset(100),a});S.obs=L.featureGroup(e),S.obs.bringToFront()}else S.obs=void 0;v()}function b(e){return{type:"Point",coordinates:[e.lng,e.lat]}}function y(){switch(c.device.size){case"xs":return L.point([0,0]);case"sm":return L.point([350,0]);case"md":case"lg":return L.point([480,0]);default:return L.point([0,0])}}function w(){return y().divideBy(2)}function k(e,a){var t=O.latLngToLayerPoint(e);return O.layerPointToLatLng(t.subtract(a))}function x(){var e=w();return k(O.getCenter(),e)}function C(){if(c.showRegions){var e=S.regions.getLayers(),a=x(),t=_.find(e,function(e){return gju.pointInPolygon(b(a),e.feature.geometry)});t||(t=_.min(e,function(e){var t=L.latLng(e.feature.properties.centroid[1],e.feature.properties.centroid[0]);return t.distanceTo(a)})),t&&R(t)}}function R(e){S.currentRegion=e,c.region!==e&&n(function(){c.region=e},10),S.regions.eachLayer(function(a){a===e?a.setStyle(A.region.selected):a.setStyle(A.region.default)})}c.device={},c.showRegions=c.showRegions||!0;var S={dangerIcons:L.featureGroup()},A={region:{"default":{fillColor:"transparent",color:"transparent"},selected:{fillColor:"#489BDF"},hover:{color:"#B43A7E"},selectedhover:{fillColor:"#489BDF",color:"#B43A7E"}}};L.mapbox.accessToken=l;var O=L.mapbox.map(d[0].id,s,{attributionControl:!1});if(O.setView([52.3,-120.74966],6),L.control.locate({locateOptions:{maxZoom:14}}).addTo(O),i.setBreakpoints({xs:480,sm:600,md:1025}),e.$on("breakpoint",function(e,a){c.device.size=a}),p.topOffset){var M=Number(p.topOffset),P=g(M);angular.element(document).ready(P),angular.element(a).bind("resize",P)}O.on("load",v),O.on("zoomend",v),c.$watch("region",function(e,a){S.regions&&e&&e!==a&&R(e)}),c.$watch("regions",function(e){e&&e.features&&u()}),c.$watch("showRegions",function(e,a){e!==a&&(!e&&O.hasLayer(S.regions)?(S.currentRegion&&(c.region=null,S.currentRegion.setStyle(A.region.default)),O.removeLayer(S.regions)):e&&!O.hasLayer(S.regions)&&(O.addLayer(S.regions),C()))}),c.$watch("obs",function(e){e&&h()}),c.$watch("ob",function(e){e&&e.latlng&&o.getOne(e.obid,"html").then(function(a){var i=L.marker(e.latlng,{icon:L.mapbox.marker.icon({"marker-size":"small","marker-color":"#09c"})}),o=O.getSize().y-100;i.bindPopup(a,{maxHeight:o,maxWidth:400,autoPanPaddingTopLeft:[0,30]}),i.on("popupclose",function(){O.removeLayer(i),n(function(){t.path("/")},0)}),i.setZIndexOffset(1e4),O.addLayer(i),i.togglePopup()})})}}}]),angular.module("acComponents.directives").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(a,t,n){var i=e(n.fileModel),o=i.assign;t.bind("change",function(){a.$apply(function(){o(a,t[0].files)})})}}}]).directive("acMinReportForm",["$q","$timeout","acQuickReportData","acSubmission","MAPBOX_ACCESS_TOKEN","MAPBOX_MAP_ID","store",function(e,a,t,n,i,o,r){return{templateUrl:"min-report-form.html",replace:!0,link:function(i){function o(){a(function(){for(var e in i.report)e in l&&(i.report[e]="ridingConditions"===e||"avalancheConditions"===e?angular.copy(l[e]):l[e]);delete i.report.subid,i.minsubmitting=!1,i.minerror=!1},0)}var l={title:"auto: Quick Report",datetime:moment().format("YYYY-MM-DD hh:mm A"),latlng:[],files:[],ridingConditions:angular.copy(t.ridingConditions),avalancheConditions:angular.copy(t.avalancheConditions),comment:null};i.report=angular.copy(l),i.resetForm=o,i.submitForm=function(){var a=r.get("token");return a?(i.minsubmitting=!0,n.submit(i.report,a).then(function(a){return!a.data||"error"in a.data?(i.minsubmitting=!1,i.minerror=!0,e.reject("error")):(i.minsubmitting=!1,i.report.subid=a.data.subid,i.report.shareUrl=a.data.obs[0].shareUrl,console.log("submission: "+a.data.subid),a)},function(a){return i.minsubmitting=!1,i.minerror=!0,i.minerrormsg=a,e.reject(a)})):e.reject("auth-error")}}}}]),angular.module("acComponents.directives").directive("acMinReportModal",function(){return{templateUrl:"min-report-modal.html",replace:!0,link:function(){}}}),angular.module("acComponents.directives").directive("acSocialShare",function(){return{templateUrl:"social-share.html",replace:!0,link:function(){}}}),angular.module("acComponents.filters").filter("acNormalizeForecastTitle",function(){return function(e){return e?e.replace(/^Avalanche (Forecast|Bulletin) - /g,""):void 0}}),angular.module("acComponents.filters").filter("dateUtc",function(){return function(e,a){return e?moment.utc(e).format(a):void 0}}),angular.module("acComponents.services").factory("acBreakpoint",["$rootScope","$timeout","$window",function(e,a,t){return{setBreakpoints:function(n){function i(){var i,r=$(t).width();i=r<n.xs?"xs":r>=n.xs&&r<n.sm?"sm":r>=n.sm&&r<n.md?"md":"lg",o&&i===o||(o=i,a(function(){e.$broadcast("breakpoint",o)},0))}var o;i(),angular.element(t).bind("resize",i)}}}]),angular.module("acComponents.services").factory("acForecast",["$http","$q","acImageCache","AC_API_ROOT_URL",function(e,a,t,n){var i,o=n;return{fetch:function(){var t=a.defer();return i?t.resolve(i):e.get(o+"/api/forecasts").then(function(e){i=e.data,t.resolve(i)}),t.promise},getOne:function(t){return a.when(this.fetch()).then(function(){var a=_.find(i.features,{id:t});return e.get(o+a.properties.forecastUrl).then(function(e){return e.data})})},getDangerIconUrl:function(e){var a=_.find(i.features,{id:e});return n+a.properties.dangerIconUrl}}}]),angular.module("acComponents.services").factory("acImageCache",["$http",function(e){return{cache:function(a){a.forEach(function(a){e.get(a)})}}}]),angular.module("acComponents.services").factory("acObservation",["$http","AC_API_ROOT_URL",function(e,a){var t=a+"/api/min/observations";return{byPeriod:function(a){var n={params:{last:a||"2:days"}};return e.get(t,n).then(function(e){return e.data})},getOne:function(a,n){var n="."+n||"",i=t+"/"+a+n;return e.get(i).then(function(e){return e.data})}}}]),angular.module("acComponents.services").service("acQuickReportData",function(){this.avalancheConditions={slab:!1,sound:!1,snow:!1,temp:!1},this.ridingConditions={ridingQuality:{prompt:"Riding quality was:",type:"single",options:["Amazing","Good","OK","Terrible"],selected:null},snowConditions:{type:"multiple",prompt:"Snow conditions were:",options:{Crusty:!1,Powder:!1,"Deep powder":!1,Wet:!1,Heavy:!1,"Wind affected":!1,Hard:!1}},rideType:{type:"multiple",prompt:"We rode:",options:{"Mellow slopes":!1,"Steep slopes":!1,"Convex slopes":!1,"Sunny slopes":!1,"Cut-blocks":!1,"Open trees":!1,"Dense trees":!1,"Alpine slopes":!1}},stayedAway:{type:"multiple",prompt:"We stayed away from:",options:{"Steep slopes":!1,"Convex slopes":!1,"Sunny slopes":!1,"Cut-blocks":!1,"Open trees":!1,"Alpine slopes":!1}},weather:{type:"multiple",prompt:"The day was:",options:{Stormy:!1,Windy:!1,Sunny:!1,Cold:!1,Warm:!1,Cloudy:!1,Foggy:!1,Wet:!1}}}}),angular.module("acComponents.services").factory("acSubmission",["$q","$http","AC_API_ROOT_URL",function(e,a,t){function n(e){return e.size<l&&-1!==s.indexOf(e.type)}function i(e){return _.reduce(e,function(e,a){return e&&n(a)},!0)}function o(a){var t=e.defer();if(i(a.files)){var n=_.reduce(a,function(e,a,t){return"files"===t?_.forEach(a,function(a,t){e.append("file"+t,a,a.name)}):_.isPlainObject(a)||_.isArray(a)?e.append(t,JSON.stringify(a)):"datetime"===t?e.append(t,moment(a,"YYYY-MM-DD hh:mm A").format()):_.isString(a)&&e.append(t,a),e},new FormData);t.resolve(n)}else t.reject(c);return t.promise}var r=t+"/api/min/submissions",l=25e6,s=["image/png","image/jpeg"],c="Invalid file! Files have to be smaller than 25 MB and of type: "+s.join(", ");return{submit:function(e,t){return o(e).then(function(e){return a.post(r,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:"Bearer "+t}})})},byPeriod:function(e){var t={params:{period:e||"2:days"}};return a.get(r,t).then(function(e){return e.data})},getOne:function(e,t){return a.get(r).then(function(e){return e.data})}}}]),angular.module("acComponents.templates",[]).run(["$templateCache",function(e){e.put("danger-icon.html",'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="398.5 12.1 555 560" enable-background="new 398.5 12.1 555 560" xml:space="preserve" class="danger-icon"><polygon id="alp" points="747.7,218.1 623.1,197.6 678.8,109.8"></polygon><polygon id="tln" points="794.2,291 542.8,323.6 616.7,207.4 755.5,230.3"></polygon><polygon id="btl" points="858.3,391.8 499.4,391.8 535.1,335.5 800.6,301.1"></polygon></svg>'),e.put("drawer.html",'<div class="ac-drawer"><style>.ac-drawer-tools {\n    z-index: -200;\n}\n\n.ac-date-filters {\n    background-color: transparent;\n}\n\n.ac-date-filters ul {\n    position: relative;\n    width: 150px;\n}\n\n.ac-date-filters ul.expanded {\n    right: 100px;\n}\n\n.ac-date-filters ul li {\n    color: rgba(255, 255, 255, 0.2);\n}\n\n.ac-date-filters ul li.on {\n    color: rgb(0, 86, 183);\n}\n\n.ac-date-filters ul li i {\n    padding-top: 5px;\n    margin-left: 8px;\n}\n\n.ac-date-filters ul li span {\n    display: block;\n    font-size: 0.7em;\n    padding-left: 4px;\n}\n</style><a ng-click="drawer.visible = false" class="ac-drawer-close visible-xs"><i class="fa fa-close fa-lg"></i></a><div class="ac-drawer-tools"><ul><li ng-click="toggleObs()" ng-class="{on: filters.obsPeriod !== \'\'}" style="padding-top: 11px; padding-left: 15px;"><i class="fa fa-map-marker fa-inverse fa-2x"></i></li><li style="background-color: transparent;" class="ac-date-filters"><ul ng-class="{expanded: expanded}" class="list-inline"><li ng-repeat="dateFilter in dateFilters" ng-click="toggleDate(\'obsPeriod:\' + dateFilter)" ng-class="{on: filters.obsPeriod === dateFilter}"><i class="fa fa-calendar fa-inverse fa-2x"></i><span>{{ dateFilter }}</span></li></ul></li></ul></div><div ng-transclude="ng-transclude" class="ac-drawer-body"></div></div>'),e.put("forecast-mini.html",'<div class="panel"><div ng-show="forecast.externalUrl" style="min-height: 500px;" class="panel-body"><div class="row"><div class="col-xs-12"><h3 class="ac-forecast-region">{{ forecast.name }}</h3></div></div><div class="row"><div class="col-xs-12"><p>Avalanche information for this region is available &nbsp;<a ng-click="externalLinkClicked(forecast.externalUrl)"><i class="fa fa-external-link">here</i></a></p></div></div></div><div ng-hide="forecast.externalUrl" class="panel-body ac-forecast-mini-body"><div scroll="true" class="ion-content"><div class="row"><div class="col-xs-12"><h4 class="ac-forecast-region">{{ forecast.bulletinTitle | acNormalizeForecastTitle }}</h4></div></div><div class="row ac-forecast-dates"><div class="col-md-6"><dl><dd class="small"><strong class="ac-text-primary">DATE ISSUED</strong></dd><dt class="small"><span class="ac-text-default">{{ forecast.dateIssued | date:\'EEEE MMMM d, y h:mm a\'  | uppercase }}</span></dt></dl></div><div class="col-md-6"><dl><dd class="small"><strong class="ac-text-primary">VALID UNTIL</strong></dd><dt class="small"><span class="ac-text-default">{{ forecast.validUntil | date:\'EEEE MMMM d, y h:mm a\' | uppercase }}</span></dt></dl></div></div><div class="row"><div class="col-xs-12"><p class="ac-forecast-highlights"><strong ng-bind-html="forecast.highlights"></strong></p></div></div><div class="row"><div class="col-xs-12"><ul role="tablist" class="nav nav-pills"><li class="active"><a href="" role="tab" data-target="#forecast" data-toggle="tab">Forecast</a></li><li><a href="" role="tab" data-target="#problems" data-toggle="tab">Problems</a></li><li><a href="" role="tab" data-target="#details" data-toggle="tab">Details</a></li><li><a href="/forecasts/{{forecast.region}}" role="tab" data-toggle="tab">Full Page</a></li></ul><div class="tab-content"><div id="forecast" class="tab-pane active"><div class="row"><div class="col-xs-12"><div class="panel panel-primary"><div class="panel-heading">{{ forecast.dangerRatings[0].date | dateUtc:\'dddd\' }}</div><div ng-hide="forecast.dangerMode==\'Spring situation\'" class="panel-body ac-forecast-nowcast"><img ng-show="forecast.region" ng-src="{{forecast.region &amp;&amp; apiUrl+\'/api/forecasts/\' + forecast.region  + \'/nowcast.svg\' || \'\'}}" class="ac-nowcast"/></div><div ng-show="forecast.dangerMode==\'Spring situation\'" class="panel-body spring-forecast"><img ng-src="http://www.avalanche.ca/assets/images/no_rating_icon_only.svg" class="col-md-4 spring-img"/><p class="col-md-8">The avalanche danger is variable and can range from Low to High. Travelling early in the day is recommended, as conditions can change rapidly in short periods of time due to daytime warming. Pay careful attention to the integrity of surface crusts formed overnight and rising air temperatures during the day. Dry slab avalanche danger may also exist during spring snow storms.<a ng-click="externalLinkClicked(forecast.externalUrl)">More Spring Conditions details.</a></p></div><table class="table table-condensed ac-forecast-days"><thead class="ac-thead-dark"><tr><th></th><th>{{ forecast.dangerRatings[1].date | dateUtc:\'dddd\' }}</th><th>{{ forecast.dangerRatings[2].date | dateUtc:\'dddd\' }}</th></tr></thead><tbody><tr><td class="ac-veg-zone--alp"><strong>Alpine</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.alp.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.alp.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.alp.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.alp.replace(\':\', \' \') }}</strong></td></tr><tr><td class="ac-veg-zone--tln"><strong>Treeline</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.tln.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.tln.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.tln.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.tln.replace(\':\', \' \') }}</strong></td></tr><tr><td class="ac-veg-zone--btl"><strong>Bellow Treeline</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[1].dangerRating.btl.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[1].dangerRating.btl.replace(\':\', \' \') }}</strong></td><td class="ac-danger-rating--{{ forecast.dangerRatings[2].dangerRating.btl.split(\':\')[1].toLowerCase()}}"><strong>{{ forecast.dangerRatings[2].dangerRating.btl.replace(\':\', \' \') }}</strong></td></tr><tr><td><strong>Confidence:</strong></td><td colspan="2"><span class="ac-text-default">{{ forecast.confidence }}</span></td></tr></tbody></table></div></div></div></div><div id="problems" class="tab-pane"><div id="problemsAccordion" class="panel-group"><div ng-repeat="problem in forecast.problems" class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#problem{{$index}}" data-toggle="collapse" data-parent="#problemsAccordion">{{ problem.type }}<i class="fa fa-fw fa-level-down pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="problem{{$index}}" class="panel-collapse collapse"><div class="panel-body"><div class="row"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">What Elevations?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--elevations"><img ng-src="{{problem.icons.elevations}}" class="center-block"/></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">What Aspects?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--aspects"><img ng-src="{{problem.icons.aspects}}" class="center-block"/></div></div></div></div><div class="row"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">Chances of Avalanches?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--likelihood"><img ng-src="{{problem.icons.likelihood}}" class="center-block"/></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><strong class="small">Expected Size?</strong></div><div class="panel-body ac-problem-icon ac-problem-icon--expected-size"><img ng-src="{{problem.icons.expectedSize}}" class="center-block"/></div></div></div></div><div class="row"><div class="col-md-12"><p ng-bind-html="problem.comment" class="ac-problem narative"></p><div class="panel panel-default ac-problem-travel-advice"><div class="panel-heading"><strong class="small">Travel and Terrain Advice</strong></div><div class="panel-body"><p ng-bind-html="problem.travelAndTerrainAdvice"></p></div></div></div></div></div></div></div></div></div><div id="details" class="tab-pane"><div id="detailsAccordion" class="panel-group"><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#avalancheSummary" data-toggle="collapse" data-parent="#detailsAccordion">Avalanche Summary<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="avalancheSummary" class="panel-collapse collapse"><div ng-bind-html="forecast.avalancheSummary" class="panel-body"></div></div></div><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#snowpackSummary" data-toggle="collapse" data-parent="#detailsAccordion">Snowpack Summary<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="snowpackSummary" class="panel-collapse collapse"><div ng-bind-html="forecast.snowpackSummary" class="panel-body"></div></div></div><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title"><a href="" data-target="#weatherForecast" data-toggle="collapse" data-parent="#detailsAccordion">Weather Forecast<i class="fa fa-fw fa-level-down fa-lg pull-right"></i><small class="pull-right">click to expand</small></a></h4></div><div id="weatherForecast" class="panel-collapse collapse"><div ng-bind-html="forecast.weatherForecast" class="panel-body"></div></div></div></div></div></div></div></div></div></div></div>'),e.put("loading-indicator.html",'<div class="ac-loading-indicator"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),e.put("min-report-form.html",'<div class="min-form"><form name="acMinForm" ng-submit="submitForm()" ng-show="!report.subid &amp;&amp; !minerror" role="form"><div ng-class="{\'has-error\': !acMinForm.title.$valid}" class="form-group"><label for="title"><i class="fa fa-newspaper-o"></i> Report title</label><input type="text" name="title" ng-model="report.title" required="required" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.datetime.$valid}" class="form-group"><label for="datetime"><i class="fa fa-clock-o"></i> Date and Time</label><input type="datetime" name="datetime" ng-model="report.datetime" ac-datetime-picker="ac-datetime-picker" class="form-control"/></div><div ng-class="{\'has-error\': !acMinForm.latlng.$valid}" class="form-group"><label for="latlng"><i class="fa fa-map-marker"></i> Location</label><div ac-location-select="ac-location-select" latlng="report.latlng" style="height: 300px; width: 100%; margin: 10px 0;"></div><input type="text" name="latlng" ng-model="report.latlng" placeholder="Drop pin on map to set location" required="required" class="form-control"/></div><div class="form-group"><label for="uploads"><i class="fa fa-image"></i> Add photo<small style="font-weight: normal;"> .jpg or .png</small></label><input type="file" name="uploads" file-model="report.files" accept=".png,.jpg,.jpeg" multiple="multiple" class="form-control"/><div>{{ report.files.length }} photos added</div></div><div class="panel-group"><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title">Riding conditions</h4></div><div class="panel-body"><div class="panel-group"><div ng-repeat="(item, ridingCondition) in report.ridingConditions" class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><strong>{{ ridingCondition.prompt }}</strong></h4></div><div class="panel-body"><div class="form-group"></div><div ng-if="ridingCondition.type==\'multiple\'" ng-repeat="(option, enabled) in ridingCondition.options" class="checkbox"><label><input type="checkbox" ng-model="report.ridingConditions[item].options[option]"/>{{option}}</label></div><div ng-if="ridingCondition.type==\'single\'" ng-repeat="option in ridingCondition.options" class="radio"><label><input type="radio" ng-model="report.ridingConditions[item].selected" ng-value="option"/>{{option}}</label></div></div></div></div></div></div><div class="panel panel-default"><div style="background-color: black; color: white;" class="panel-heading"><h4 class="panel-title"><strong>Avalanche conditions</strong></h4></div><div class="panel-body"><div class="form-group"><div class="checkbox"><label><input type="checkbox" ng-model="report.avalancheConditions.slab"/>Slab avalanches today or yesterday.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.avalancheConditions.sound"/>Whumphing or drum-like sounds or shooting cracks.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.avalancheConditions.snow"/>30cm + of new snow, or significant drifitng, or rain in the last 48 hours.</label></div><div class="checkbox"><label><input type="checkbox" ng-model="report.avalancheConditions.temp"/>Rapid temperature rise to near zero degrees or wet surface snow.</label></div></div></div></div></div><div class="form-group"><label>Comments</label><textarea rows="3" ng-model="report.comment" class="form-control"></textarea></div><input type="submit" id="submit" value="Submit" ng-disabled="minsubmitting" style="border-radius:0; background-color: rgb(0, 86, 183); color: white;" class="btn btn-default"/><i ng-show="minsubmitting" class="fa fa-fw fa-lg fa-spinner fa-spin"></i></form><div ng-show="report.subid"><div role="alert" class="alert alert-success">Your report was successfully submited.</div><div class="well"><H4>Share this report:</H4><ul class="list-inline"><li><a ng-href="https://twitter.com/intent/tweet?status={{report.shareUrl}}"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a ng-href="https://www.facebook.com/sharer/sharer.php?u={{report.shareUrl}}"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a ng-href="https://plus.google.com/share?url={{report.shareUrl}}"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div></div><div ng-show="minerror"><div role="alert" class="alert alert-danger"><p>There was an error submittting you report.</p><p>{{minerrormsg}}</p></div></div></div>'),e.put("min-report-modal.html",'<div id="minForm" role="dialog" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button data-dismiss="modal" class="close"><span>close</span></button><h4 class="modal-title">Mountain Information Network Report</h4></div><div class="modal-body"><div ac-min-report-form="ac-min-report-form"></div></div></div></div></div>'),e.put("min-report-popup-modal.html",'<div id="mobileMapPopup" role="dialog" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"></div>                <a href="#" data-dismiss="modal" style="position: absolute; right: 10px; top: 10px;" class="pull-right"><i class="fa fa-close fa-lg"></i></a></div></div></div>'),e.put("social-share.html",'<div class="well"><H4>Share this report:</H4><ul class="list-inline"><li><a href="https://twitter.com/intent/tweet?url=http://avalanche.ca"><i class="fa fa-twitter fa-fw fa-lg"></i></a></li><li><a href="https://www.facebook.com/sharer/sharer.php?u=http://avalanche.ca"><i class="fa fa-facebook fa-fw fa-lg"></i></a></li><li><a href="https://plus.google.com/share?url=http://avalanche.ca"><i class="fa fa-google-plus fa-fw fa-lg"></i></a></li></ul></div>')}])}();